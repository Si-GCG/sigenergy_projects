views:
  - type: sections
    max_columns: 4
    title: Overview
    path: overview
    icon: mdi:home
    theme: Dark Pastel
    sections:
      - type: grid
        cards:
          - type: custom:button-card
            show_state: true
            tap_action: none
            custom_fields:
              home_image:
                card:
                  type: picture
                  image: /local/Sigenergy/sys_type_resd.png
                  card_mod:
                    style: |
                      ha-card { background-color: transparent; border: none; }
              pv_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set power = states('sensor.sigen_inverter_pv_power') |
                    float(0) %} {{ power | round(1) }}kW
                  secondary: SOLAR
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: |
                        .primary {
                          font-size: 14px !important;
                          font-weight: bold;
                          color: #e0e0e0 !important;        /* Light gray for subtlety */
                          text-shadow: 1px 1px 4px #222;    /* Softer shadow */
                        } .secondary {
                          font-size: 12px !important;
                          font-weight: bold;
                          color: #90caf9 !important;        /* Soft blue for subtle highlight */
                          text-shadow: 1px 1px 4px #222;
                        }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              load_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set power = states('sensor.sigen_plant_consumed_power') |
                    float(0) %} {{ power | round(1) }}kW
                  secondary: HOME
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; letter-spacing: -0.1px !important; position:
                        relative; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              grid_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set import =
                    states('sensor.sigen_plant_grid_import_power') | float(0) %}
                    {% set export =
                    states('sensor.sigen_plant_grid_export_power') | float(0) %}
                    {% if import > 0 %}
                      {{ import | round(1) }}kW
                    {% elif export > 0 %}
                      {{ (0 - export) | round(1) }}kW
                    {% else %}
                      0kW
                    {% endif %}
                  secondary: GRID
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; letter-spacing: -0.1px !important; position:
                        relative; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              grid_flow_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set import =
                    states('sensor.sigen_plant_grid_import_power') | float(0) %}
                    {% set export =
                    states('sensor.sigen_plant_grid_export_power') | float(0) %}
                    {% if import > 0 %}
                      Importing
                    {% elif export > 0 %}
                      Exporting
                    {% else %}
                      
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        green !important; position: relative; overflow: visible
                        !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
            ev_soc:
              card:
                type: custom:mushroom-template-card
                primary: >
                  {% set power =
                  states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                  | float(0) %} {% set soc_raw =
                  states('sensor.wvwzzzed3se512936_battery_level') %} {% set soc
                  = soc_raw | float(0) if soc_raw not in ['unknown',
                  'unavailable', None] else 'N/A' %} {% set range_raw =
                  states('sensor.wvwzzzed3se512936_battery_cruising_range') %}
                  {% set range = range_raw | float(0) if range_raw not in
                  ['unknown', 'unavailable', None] else 'N/A' %} {% if power > 0
                  %}
                   {{ power | round(1) }}kW - {{ soc }}% ({{ range if range == 'N/A' else (range | round(0)) }}km)
                  {% else %}
                   {{ soc }}% ({{ range if range == 'N/A' else (range | round(0)) }}km)
                  {% endif %}
                secondary: >
                  {% set soc =
                  states('sensor.sigen_inverter_dc_charger_dc_charger_vehicle_soc')
                  %} {% if soc == 'unknown' %}
                    Car Asleep
                  {% else %}
                    Buzz Lightgear
                  {% endif %}
                multiline_secondary: false
                fill_container: false
                card_mod:
                  style:
                    mushroom-state-info$: >
                      .primary { font-size: 14px !important; font-weight: bold
                      !important; position: relative; letter-spacing: -0.1px
                      !important; overflow: visible !important; text-align:
                      left; } .secondary { font-size: 12px !important; color:
                      gray !important; position: relative; letter-spacing:
                      -0.1px !important; overflow: visible !important;
                      text-align: left; }
                    .: |
                      ha-card { background-color: transparent; border: none; }
              ev_dc_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set dcrunstatus =
                    states('sensor.sigen_inverter_running_state') | float(0) %}
                    {% if dcrunstatus == 2 %} Charging {% elif dcrunstatus == 3
                    %} Charging (Scheduled) {% elif dcrunstatus == 5 %}
                    Reserving {% else %} Available {% endif %}
                  secondary: DC CHARGER
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_charging_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      Charging
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        red !important; position: relative; overflow: visible
                        !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_charging_icon:
                card:
                  type: custom:mushroom-template-card
                  icon: >-
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      mdi:lightning-bolt
                    {% endif %}
                  icon_color: >-
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      red
                    {% endif %}
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        lightgreen !important; position: relative; overflow:
                        visible !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              vertical_line:
                card:
                  type: custom:button-card
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        border: none;
                        position: relative;
                        width: 1px;
                        height: 110px;
                        background-color: gray;
                        overflow: hidden;
                        animation: rotation 2s linear infinite;
                      }
                      .line {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        background: linear-gradient(0deg, green 50%, transparent 50%);
                        background-size: 100% 200%;
                      }
                      @keyframes rotation {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                      }
            styles:
              card:
                - align-self: start
                - height: >
                    [[[ return states['input_number.sigen_home_card_height'] &&
                    states['input_number.sigen_home_card_height'].state
                        ? states['input_number.sigen_home_card_height'].state + 'px'
                        : '400px'; ]]]
                - opacity: 1
                - background-color: transparent
                - border: none
              custom_fields:
                home_image:
                  - position: absolute
                  - top: 5px
                  - left: 10px
                  - width: 395px
                sigenstor_inverter:
                  - position: absolute
                  - top: 5px
                  - left: 10px
                  - width: 395px
                ammeter_home_image:
                  - position: absolute
                  - top: 5px
                  - left: 10px
                  - width: 395px
                ac_charger_bg_image:
                  - position: absolute
                  - top: 5px
                  - left: 10px
                  - width: 395px
                pv_power:
                  - position: absolute
                  - top: 50px
                  - left: 150px
                  - width: 100px
                load_power:
                  - position: absolute
                  - top: 15px
                  - left: 300px
                  - width: 100px
                water_diverter_power:
                  - position: absolute
                  - top: 110px
                  - left: 130px
                  - width: 100px
                grid_power:
                  - position: absolute
                  - top: 300px
                  - left: 300px
                  - width: 100px
                grid_flow_label:
                  - position: absolute
                  - top: 335px
                  - left: 300px
                  - width: 100px
                battery_soc:
                  - position: absolute
                  - top: 300px
                  - left: 175px
                  - width: 100px
                battery_discharge_label:
                  - position: absolute
                  - top: 335px
                  - left: 175px
                  - width: 100px
                battery_charge_label:
                  - position: absolute
                  - top: 335px
                  - left: 175px
                  - width: 100px
                ev_soc:
                  - position: absolute
                  - top: 300px
                  - left: 20px
                  - width: 100px
                ev_ac_power:
                  - position: absolute
                  - top: 15px
                  - left: 20px
                  - width: 100px
                ev_charging_label:
                  - position: absolute
                  - top: 335px
                  - left: 20px
                  - width: 100px
                ev_charging_icon:
                  - position: absolute
                  - top: 245px
                  - left: 10px
                  - width: 100px
                vertical_line:
                  - position: absolute
                  - top: 47px
                  - left: 305px
                  - width: 1px
                  - height: 100px
      - type: grid
        cards:
          - type: custom:button-card
            show_state: true
            tap_action: none
            custom_fields:
              sigenstor_inverter:
                card:
                  type: picture
                  image: /local/Sigenergy/1inverter1dcCharger2battery.png
                  card_mod:
                    style: |
                      ha-card { background-color: transparent; border: none; }
              pv_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set power = states('sensor.sigen_inverter_pv_power') |
                    float(0) %} {{ power | round(1) }}kW
                  secondary: SOLAR
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: |
                        .primary {
                          font-size: 14px !important;
                          font-weight: bold;
                          color: black !important;          
                        } .secondary {
                          font-size: 12px !important;
                          font-weight: bold;
                          color: grey !important;       
                        }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              load_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set power = states('sensor.sigen_plant_consumed_power') |
                    float(0) %} {{ power | round(1) }}kW
                  secondary: HOME
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight:
                        bold; colour: black !important; position: relative;
                        letter-spacing: -0.1px !important; overflow: visible
                        !important; text-align: left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; letter-spacing: -0.1px !important; position:
                        relative; overflow: visible !important; text-align: left
                        ; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              grid_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set import =
                    states('sensor.sigen_plant_grid_import_power') | float(0) %}
                    {% set export =
                    states('sensor.sigen_plant_grid_export_power') | float(0) %}
                    {% if import > 0 %}
                      {{ import | round(1) }}kW
                    {% elif export > 0 %}
                      {{ (0 - export) | round(1) }}kW
                    {% else %}
                      0kW
                    {% endif %}
                  secondary: GRID
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; letter-spacing: -0.1px !important; position:
                        relative; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              grid_flow_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set import =
                    states('sensor.sigen_plant_grid_import_power') | float(0) %}
                    {% set export =
                    states('sensor.sigen_plant_grid_export_power') | float(0) %}
                    {% if import > 0 %}
                      Importing
                    {% elif export > 0 %}
                      Exporting
                    {% else %}
                      
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        green !important; position: relative; overflow: visible
                        !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              battery_soc:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set soc =
                    states('sensor.sigen_plant_battery_state_of_charge') %} {%
                    set soc_power = states('sensor.sigen_plant_battery_power') |
                    float(0) %} {% if soc_power != 0 %}
                      {{ soc_power | abs | round(2) }}kW Â· {{ soc }}%
                    {% else %}
                      {{ soc }}%
                    {% endif %}
                  secondary: SigenStor
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; overflow: visible
                        !important; letter-spacing: -0.1px !important;
                        text-align: left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              battery_discharge_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set soc_power =
                    states('sensor.sigen_plant_battery_power') | float(0) %} {%
                    if soc_power < 0 %}
                      Discharging
                    {% else %}
                      
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        lightgreen !important; position: relative; overflow:
                        visible !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              battery_charge_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set soc_power =
                    states('sensor.sigen_plant_battery_power') | float(0) %} {%
                    if soc_power > 0 %}
                      Charging
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        red !important; position: relative; overflow: visible
                        !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_soc:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% set soc_raw =
                    states('sensor.wvwzzzed3se512936_battery_level') %} {% set
                    soc = soc_raw | float(0) if soc_raw not in ['unknown',
                    'unavailable', None] else 'N/A' %} {% set range_raw =
                    states('sensor.wvwzzzed3se512936_battery_cruising_range') %}
                    {% set range = range_raw | float(0) if range_raw not in
                    ['unknown', 'unavailable', None] else 'N/A' %} {% if power >
                    0 %} {{ power | round(1) }}kW - {{ soc }}% ({{ range |
                    round(0) }}km) {% else %}
                      {{ soc }}% ({{ range | round(0) }}km)
                    {% endif %}
                  secondary: >
                    {% set soc =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_vehicle_soc')
                    %} {% if soc == 'unknown' %}
                      Car Asleep
                    {% else %}
                      Buzz Lightgear
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; } .secondary { font-size: 12px !important; color:
                        gray !important; position: relative; letter-spacing:
                        -0.1px !important; overflow: visible !important;
                        text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_dc_power:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set dcrunstatus =
                    states('sensor.sigen_inverter_running_state') | float(0) %}
                    {% if dcrunstatus == 2 %}
                      Charging
                    {% elif dcrunstatus == 3 %}
                      Charging (Scheduled)
                    {% elif dcrunstatus == 5 %}
                      Reserving
                    {% else %}
                      Available
                    {% endif %}
                  secondary: DC CHARGER
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 14px !important; font-weight: bold
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }

                        .secondary { font-size: 12px !important; color: gray
                        !important; position: relative; letter-spacing: -0.1px
                        !important; overflow: visible !important; text-align:
                        left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_charging_label:
                card:
                  type: custom:mushroom-template-card
                  primary: >
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      Charging
                    {% endif %}
                  multiline_secondary: false
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        red !important; position: relative; overflow: visible
                        !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
              ev_charging_icon:
                card:
                  type: custom:mushroom-template-card
                  icon: >-
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      mdi:lightning-bolt
                    {% endif %}
                  icon_color: >-
                    {% set soc_power =
                    states('sensor.sigen_inverter_dc_charger_dc_charger_output_power')
                    | float(0) %} {% if soc_power > 0 %}
                      red
                    {% endif %}
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-state-info$: >
                        .primary { font-size: 12px !important; font-weight: bold
                        !important; letter-spacing: -0.1px !important; color:
                        lightgreen !important; position: relative; overflow:
                        visible !important; text-align: left; }
                      .: |
                        ha-card { background-color: transparent; border: none; }
            styles:
              card:
                - align-self: start
                - height: >
                    [[[ return states['input_number.sigen_home_card_height'] &&
                    states['input_number.sigen_home_card_height'].state
                        ? states['input_number.sigen_home_card_height'].state + 'px'
                        : '500px'; ]]]
                - opacity: 1
                - background-color: transparent
                - border: none
              custom_fields:
                sigenstor_inverter:
                  - position: absolute
                  - top: 5px
                  - left: 10px
                  - width: 395px
                pv_power:
                  - position: absolute
                  - top: 50px
                  - left: 97px
                  - width: 100px
                load_power:
                  - position: absolute
                  - top: 250px
                  - left: 120px
                  - width: 100px
                grid_power:
                  - position: absolute
                  - top: 340px
                  - left: 285px
                  - width: 100px
                grid_flow_label:
                  - position: absolute
                  - top: 375px
                  - left: 285px
                  - width: 100px
                battery_soc:
                  - position: absolute
                  - top: 95px
                  - left: 120px
                  - width: 100px
                battery_discharge_label:
                  - position: absolute
                  - top: 130px
                  - left: 120px
                  - width: 100px
                battery_charge_label:
                  - position: absolute
                  - top: 130px
                  - left: 120px
                  - width: 100px
                ev_soc:
                  - position: absolute
                  - top: 130px
                  - left: 285px
                  - width: 100px
                ev_ac_power:
                  - position: absolute
                  - top: 15px
                  - left: 20px
                  - width: 100px
                ev_charging_label:
                  - position: absolute
                  - top: 335px
                  - left: 20px
                  - width: 100px
                ev_charging_icon:
                  - position: absolute
                  - top: 245px
                  - left: 10px
                  - width: 100px
      - type: grid
        cards:
          - type: energy-distribution
            link_dashboard: true
  - title: Home
    icon: mdi:sun-compass
    cards:
      - show_name: false
        show_icon: true
        show_state: false
        type: glance
        entities:
          - entity: sun.sun
          - entity: binary_sensor.sigen_plant_pv_generating
            name: PV Generating
            icon: mdi:solar-power
          - entity: binary_sensor.sigen_plant_battery_charging
            name: Battery charging
            icon: mdi:battery-positive
          - entity: binary_sensor.sigen_plant_battery_discharging
            name: Battery discharging
            icon: mdi:battery-negative
          - entity: binary_sensor.sigen_plant_exporting_to_grid
            name: Exporting to grid
            icon: mdi:transmission-tower-import
          - entity: binary_sensor.sigen_plant_importing_from_grid
            name: Importing from grid
            icon: mdi:transmission-tower-export
        columns: 6
        state_color: true
      - type: entities
        entities:
          - entity: sensor.sigen_plant_consumed_power
            icon: mdi:home-lightning-bolt-outline
            name: Consumed power
          - entity: sensor.sigen_plant_pv_power
            icon: mdi:solar-power
            name: Solar power production
          - entity: sensor.sigen_plant_battery_power
            name: Battery charge / discharge
            icon: mdi:battery-charging
          - entity: sensor.sigen_plant_grid_import_power
            name: Import from Grid
            icon: mdi:transmission-tower-export
          - entity: sensor.sigen_plant_grid_export_power
            name: Export to Grid
            icon: mdi:transmission-tower-import
        title: Power
      - type: vertical-stack
        cards:
          - type: gauge
            entity: sensor.sigen_plant_battery_state_of_charge
            min: 0
            max: 100
            severity:
              green: 30
              yellow: 10
              red: 0
            name: Battery
          - type: entities
            entities:
              - entity: sensor.sigen_plant_battery_power
                icon: mdi:battery-charging
              - entity: sensor.sigen_inverter_battery_average_cell_temperature
                name: Average cell temperature
                secondary_info: none
                icon: ''
              - entity: sensor.sigen_inverter_pcs_internal_temperature
                name: Inverter temperature
                secondary_info: none
      - type: entities
        entities:
          - entity: sensor.sigen_plant_daily_consumed_energy
            name: Daily energy consumption
            icon: mdi:home-lightning-bolt-outline
          - entity: sensor.sigen_plant_daily_pv_energy
            name: Daily solar production
            icon: mdi:solar-power
          - entity: sensor.sigen_inverter_daily_charge_energy
            name: Daily battery charge
            icon: mdi:battery-positive
          - entity: sensor.sigen_inverter_daily_discharge_energy
            icon: mdi:battery-negative
            name: Daily battery discharge
          - entity: sensor.sigen_plant_daily_grid_import_energy
            name: 'Daily Energy import from Grid '
            icon: mdi:transmission-tower-export
          - entity: sensor.sigen_plant_daily_grid_export_energy
            name: 'Daily Energy export to Grid '
            icon: mdi:transmission-tower-import
        title: Daily Energy
      - type: entities
        entities:
          - entity: sensor.sigen_plant_accumulated_consumed_energy
            name: Energy consumption
            icon: mdi:home-lightning-bolt-outline
          - entity: sensor.sigen_plant_accumulated_pv_energy
            name: Solar production
            icon: mdi:solar-power
          - entity: sensor.sigen_plant_accumulated_battery_charge_energy
            name: Battery charged
            icon: mdi:battery-positive
          - entity: sensor.sigen_plant_accumulated_battery_discharge_energy
            name: Battery discharged
            icon: mdi:battery-negative
          - entity: sensor.sigen_plant_accumulated_grid_import_energy
            name: 'Energy import from Grid '
            icon: mdi:transmission-tower-export
          - entity: sensor.sigen_plant_accumulated_grid_export_energy
            name: 'Energy export to Grid '
            icon: mdi:transmission-tower-import
        title: Total Energy
      - chart_type: line
        period: 5minute
        type: statistics-graph
        entities:
          - sensor.sigen_inverter_pv_power
          - sensor.sigen_plant_battery_power
          - sensor.sigen_plant_grid_import_power
          - sensor.sigen_plant_grid_export_power
          - sensor.sigen_plant_consumed_power
        stat_types:
          - mean
        title: Power distribution last 24 hours
        hide_legend: false
        logarithmic_scale: false
        days_to_show: 1
      - chart_type: line
        period: hour
        type: statistics-graph
        entities:
          - sensor.sigen_plant_pv_power
          - sensor.sigen_inverter_pv4_power
          - sensor.sigen_inverter_pv1_power
          - sensor.sigen_inverter_pv3_power
          - sensor.sigen_inverter_pv2_power
        stat_types:
          - mean
        days_to_show: 2
        title: Solar production last 48h
        logarithmic_scale: false
      - type: energy-distribution
        link_dashboard: true
    badges:
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_plant_general_alarm_1
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_plant_general_alarm_1
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_plant_general_alarm_2
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_plant_general_alarm_2
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_plant_general_alarm_3
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_plant_general_alarm_3
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_plant_general_alarm_4
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_plant_general_alarm_4
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_plant_general_alarm_5
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_plant_general_alarm_5
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_inverter_alarm_1
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_inverter_alarm_1
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_inverter_alarm_2
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_inverter_alarm_2
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_inverter_alarm_3
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_inverter_alarm_3
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_inverter_alarm_4
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_inverter_alarm_4
            state_not: No Alarm
      - type: entity
        show_name: false
        show_state: true
        show_icon: true
        entity: sensor.sigen_inverter_alarm_5
        color: red
        visibility:
          - condition: state
            entity: sensor.sigen_inverter_alarm_5
            state_not: No Alarm
  - title: EMS Control
    icon: mdi:solar-power
    cards:
      - type: entities
        entities:
          - entity: sensor.sigen_plant_ems_work_mode
          - type: divider
          - entity: select.sigen_plant_remote_ems_control_mode
          - entity: switch.sigen_plant_remote_ems_controled_by_home_assistant
        title: Configurable EMS settings
      - type: entities
        entities:
          - type: section
            label: EMS must be set in Remote mode before changing values.
          - type: divider
          - entity: number.sigen_plant_ess_max_charging_limit
          - entity: sensor.sigen_plant_available_max_charging_capacity
            name: Applied ESS max charging limit
            icon: mdi:battery-positive
          - entity: sensor.sigen_plant_available_max_charging_power
            name: Upper charging limit
            icon: mdi:car-speed-limiter
          - type: divider
          - entity: number.sigen_plant_ess_max_discharging_limit
          - entity: sensor.sigen_inverter_max_battery_discharge_power
            name: Applied ESS max discharging limit
            icon: mdi:battery-positive
          - entity: sensor.sigen_plant_ess_rated_discharging_power
            icon: mdi:car-speed-limiter
            name: Upper discharging limit
          - type: section
            label: >-
              This values are updatedonce every 10s by default. Deselect textbox
              after changing the value to send it. If invalid value entered then
              it will not be shown in applied.
          - type: section
            label: >-
              When manually switching from Sigen AI, the AI will remain active,
              but inverter operating mode will change. To revert to Sigen AI,
              first disable AI mode, then re-enable it in app.
        title: ESS limits
      - chart_type: line
        period: hour
        type: statistics-graph
        entities:
          - sensor.sigen_plant_battery_state_of_charge
        title: Battery SoC last 7 days
        hide_legend: true
        logarithmic_scale: false
        stat_types:
          - min
          - max
        days_to_show: 7
      - chart_type: line
        period: hour
        type: statistics-graph
        entities:
          - sensor.sigen_plant_pv_power
          - sensor.sigen_inverter_pv4_power
          - sensor.sigen_inverter_pv2_power
          - sensor.sigen_inverter_pv1_power
          - sensor.sigen_inverter_pv3_power
        stat_types:
          - mean
        days_to_show: 7
        title: Solar production last 7 days
        logarithmic_scale: false
      - type: entities
        entities:
          - type: section
            label: >-
              EMS must be set in Remote mode (Home Assistant control) before
              changing values. Note that these values are ignored when EMS
              control mode is set to 'Maximum self-consumption (default)'.
          - type: divider
          - entity: number.sigen_plant_pv_max_power_limit
        title: Solar production limit (kW)
      - type: entities
        entities:
          - type: section
            label: EMS = Energy Management System (Inverter)
          - type: section
            label: ESS = Energy Storage System (Battery)
          - type: section
            label: PCS = Power Conversion System (CheckWatt)
            title: Glossary
  - title: All Sigenergy provided parameters
    icon: mdi:solar-power-variant-outline
    cards:
      - type: entities
        entities:
          - entity: sensor.sigen_plant_ems_work_mode
          - entity: switch.sigen_plant_remote_ems_controled_by_home_assistant
          - entity: switch.sigen_plant_independent_phase_power_control
          - entity: select.sigen_plant_remote_ems_control_mode
          - entity: number.sigen_plant_ess_max_charging_limit
          - entity: number.sigen_plant_ess_max_discharging_limit
          - entity: number.sigen_plant_pv_max_power_limit
        title: Configurable EMS values
      - type: entities
        entities:
          - entity: select.sigen_inverter_grid_code
        title: Configurable device values only read
      - type: entities
        entities:
          - entity: number.sigen_plant_active_power_fixed_adjustment
          - entity: number.sigen_inverter_reactive_power_fixed_adjustment
          - entity: number.sigen_inverter_active_power_percentage_adjustment
          - entity: number.sigen_plant_q_s_adjustment
          - entity: number.sigen_plant_power_factor_adjustment
        title: Configurable EMS settings only read
      - type: entities
        entities:
          - entity: sensor.sigen_plant_plant_running_state
          - entity: sensor.sigen_plant_ems_work_mode
          - entity: sensor.sigen_inverter_active_power
          - entity: sensor.sigen_inverter_reactive_power
          - entity: sensor.sigen_plant_max_active_power
          - entity: sensor.sigen_plant_max_apparent_power
          - entity: sensor.sigen_plant_available_max_active_power
          - entity: sensor.sigen_plant_available_max_reactive_power
          - entity: sensor.sigen_plant_available_min_active_power
          - entity: sensor.sigen_plant_available_min_reactive_power
        title: Energy Mangement System (EMS)
      - type: entities
        entities:
          - entity: sensor.sigen_inverter_model_type
          - entity: sensor.sigen_plant_plant_running_state
          - entity: sensor.sigen_inverter_serial_number
          - entity: sensor.sigen_inverter_firmware_version
          - entity: sensor.sigen_inverter_rated_active_power
          - entity: sensor.sigen_plant_max_active_power
          - entity: sensor.sigen_inverter_max_absorption_power
          - entity: sensor.sigen_inverter_rated_battery_capacity
          - entity: sensor.sigen_plant_ess_rated_charging_power
          - entity: sensor.sigen_inverter_ess_rated_discharge_power
          - entity: sensor.sigen_plant_daily_grid_export_energy
          - entity: sensor.sigen_plant_accumulated_grid_export_energy
          - entity: sensor.sigen_plant_daily_grid_import_energy
          - entity: sensor.sigen_plant_accumulated_grid_import_energy
          - entity: sensor.sigen_plant_daily_battery_charge_energy
          - entity: sensor.sigen_inverter_daily_discharge_energy
          - entity: sensor.sigen_plant_accumulated_battery_charge_energy
          - entity: sensor.sigen_plant_accumulated_battery_discharge_energy
          - entity: sensor.sigen_inverter_min_active_power_adjustment
          - entity: sensor.sigen_inverter_min_active_power_adjustment
          - entity: sensor.sigen_plant_available_max_reactive_power
          - entity: sensor.sigen_plant_available_min_reactive_power
          - entity: sensor.sigen_plant_plant_active_power
          - entity: sensor.sigen_inverter_reactive_power
          - entity: sensor.sigen_inverter_rated_grid_voltage
          - entity: sensor.sigen_inverter_rated_grid_frequency
          - entity: sensor.sigen_inverter_grid_frequency
          - entity: sensor.sigen_inverter_pcs_internal_temperature
          - entity: sensor.sigen_inverter_output_type
          - entity: sensor.sigen_inverter_power_factor
          - entity: sensor.sigen_inverter_pack_count
        title: Sigenergy Device
      - type: entities
        entities:
          - entity: sensor.sigen_plant_battery_state_of_charge
          - entity: sensor.sigen_plant_battery_power
          - entity: sensor.sigen_plant_available_max_charging_power
          - entity: sensor.sigen_plant_available_max_discharging_power
          - entity: sensor.sigen_plant_available_max_charging_capacity
          - entity: sensor.sigen_plant_available_max_discharging_capacity
          - entity: sensor.sigen_plant_ess_rated_charging_power
          - entity: sensor.sigen_plant_ess_rated_discharging_power
          - entity: sensor.sigen_inverter_max_battery_charge_power
          - entity: sensor.sigen_inverter_max_battery_discharge_power
          - entity: sensor.sigen_inverter_available_battery_charge_energy
          - entity: sensor.sigen_inverter_available_battery_discharge_energy
          - entity: sensor.sigen_plant_battery_power
          - entity: sensor.sigen_plant_battery_state_of_charge
          - entity: sensor.sigen_plant_battery_state_of_health
          - entity: sensor.sigen_inverter_battery_average_cell_temperature
          - entity: sensor.sigen_inverter_battery_average_cell_voltage
        title: Energy Storage System (ESS)
      - type: entities
        entities:
          - entity: sensor.sigen_plant_grid_connection_status
          - entity: binary_sensor.sigen_plant_importing_from_grid
          - entity: binary_sensor.sigen_plant_exporting_to_grid
          - entity: sensor.sigen_plant_grid_active_power
          - entity: sensor.sigen_plant_grid_export_power
          - entity: sensor.sigen_plant_grid_import_power
        title: Grid sensor
      - type: entities
        entities:
          - entity: sensor.sigen_inverter_alarm_1
          - entity: sensor.sigen_inverter_alarm_2
          - entity: sensor.sigen_inverter_alarm_3
          - entity: sensor.sigen_inverter_alarm_4
          - entity: sensor.sigen_inverter_alarm_5
          - entity: sensor.sigen_plant_general_alarm_1
          - entity: sensor.sigen_plant_general_alarm_2
          - entity: sensor.sigen_plant_general_alarm_3
          - entity: sensor.sigen_plant_general_alarm_4
          - entity: sensor.sigen_plant_general_alarm_5
        title: Alarm
      - type: entities
        entities:
          - entity: sensor.sigen_plant_pv_power
          - entity: sensor.sigen_inverter_pv_power
          - entity: sensor.sigen_inverter_pv_string_count
          - entity: sensor.sigen_inverter_mppt_count
          - entity: sensor.sigen_inverter_pv4_voltage
          - entity: sensor.sigen_inverter_pv4_current
          - entity: sensor.sigen_inverter_pv2_voltage
          - entity: sensor.sigen_inverter_pv2_current
          - entity: sensor.sigen_inverter_pv1_voltage
          - entity: sensor.sigen_inverter_pv1_current
          - entity: sensor.sigen_inverter_pv3_voltage
          - entity: sensor.sigen_inverter_pv3_current
          - entity: sensor.sigen_inverter_insulation_resistance
          - entity: sensor.sigen_inverter_startup_time
          - entity: sensor.sigen_inverter_shutdown_time
        title: PV
  - title: Calculated attributes
    path: calculated-attributes
    icon: mdi:calculator-variant
    cards:
      - type: entities
        entities:
          - entity: sensor.sigen_inverter_battery_power
          - entity: sensor.sigen_plant_ess_rated_discharging_power
          - entity: >-
              sensor.sigen_inverter_dc_charger_dc_charger_current_charging_capacity_single_time
        title: Calculated Battery values
      - type: entities
        entities:
          - entity: sensor.sigen_plant_grid_active_power
          - entity: sensor.sigen_plant_grid_reactive_power
          - entity: sensor.sigen_inverter_daily_pv_energy
          - entity: sensor.sigen_plant_grid_import_power
          - entity: sensor.sigen_plant_grid_export_power
          - entity: sensor.sigen_inverter_pv4_power
          - entity: sensor.sigen_inverter_pv2_power
          - entity: sensor.sigen_inverter_pv1_power
          - entity: sensor.sigen_inverter_pv3_power
          - entity: sensor.sigen_plant_consumed_power
        title: Calculated Power values
      - type: entities
        entities:
          - entity: binary_sensor.sigen_plant_pv_generating
          - entity: binary_sensor.sigen_plant_battery_charging
          - entity: binary_sensor.sigen_plant_battery_discharging
          - entity: binary_sensor.sigen_plant_importing_from_grid
          - entity: binary_sensor.sigen_plant_exporting_to_grid
        title: Calculated states
      - type: entities
        entities:
          - entity: sensor.sigen_plant_accumulated_consumed_energy
          - entity: sensor.sigen_plant_accumulated_pv_energy
          - entity: sensor.sigen_plant_accumulated_grid_export_energy
          - entity: sensor.sigen_plant_accumulated_grid_import_energy
        title: Calculated Accumulated Energy values
      - type: entities
        entities:
          - entity: sensor.sigen_plant_daily_consumed_energy
          - entity: sensor.sigen_inverter_daily_pv_energy
          - entity: sensor.sigen_plant_daily_grid_export_energy
          - entity: sensor.sigen_plant_daily_grid_import_energy
        title: Calculated Daily Energy values
title: PV System
